<!DOCTYPE html>
<html>
<head>
    <title>Kokoro TTS</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Add a simple spin animation for the loading state */
        @keyframes spin { 100% { transform: rotate(360deg); } }
        .spinning { animation: spin 1s linear infinite; display: inline-block; }
    </style>
</head>
<body>
    <h1>Kokoro Local TTS</h1>
    
    <div id="text-container" style="position: relative; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px; background: #fff;">
        <div id="text-input" contenteditable="true" style="min-height: 150px; max-height: 300px; overflow-y: auto; padding: 5px; outline: none;"></div>
    </div>

    <div style="display: flex; gap: 5px; align-items: center;">
        <div style="flex-grow: 1;">
            <label for="voice-select">Voice:</label>
            <select id="voice-select" style="width: 100%;">
                <option value="af_sky" selected>af_sky (Default)</option>
            </select>
        </div>
        <button id="refresh-connection" style="margin-top: 14px; padding: 5px 10px;" title="Check Server Connection">
            &#x21bb; </button>
    </div>

    <div style="display: flex; gap: 10px; align-items: center; margin-top: 5px;">
        <div style="flex: 1;">
            <label for="speed-input">Speed: <span id="speed-value">1.0</span></label>
            <input type="range" id="speed-input" min="0.5" max="2.0" step="0.1" value="1.0" style="width: 100%;">
        </div>
        
        <div style="width: 80px;">
            <label for="buffer-input" title="Sentences to preload">Buffer:</label>
            <input type="number" id="buffer-input" min="1" max="10" value="2" style="width: 100%;">
        </div>
    </div>
    
    <div class="button-group" style="margin-top: 15px;">
        <button id="stream-button">Stream (Fast)</button>
        <button id="stop-button" disabled>Stop</button>
    </div>
    
    <div id="status-message" style="margin-top: 10px; font-size: 0.9em; min-height: 1.2em; white-space: pre-wrap;"></div>

    <script src="popup.js"></script>
</body>
</html>
